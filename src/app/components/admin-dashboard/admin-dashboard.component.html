<div class="page-header">
  <div class="container">
    <h1>Admin Dashboard</h1>
    <p>Manage bookings and services</p>
  </div>
</div>

<div class="page-content">
  <div class="container">
    <div *ngIf="!isAuthenticated" style="max-width: 400px; margin: 40px auto;">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Admin Login</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Password</mat-label>
            <input matInput type="password" [(ngModel)]="password" (keyup.enter)="login()">
          </mat-form-field>
          <button mat-raised-button color="primary" class="full-width" (click)="login()">
            Login
          </button>
          <p style="margin-top: 20px; font-size: 0.9rem; color: #666; text-align: center;">
            Demo password: admin123
          </p>
        </mat-card-content>
      </mat-card>
    </div>

    <div *ngIf="isAuthenticated">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <h2>All Bookings</h2>
        <button mat-raised-button color="primary" (click)="loadBookings()">
          <mat-icon>refresh</mat-icon>
          Refresh
        </button>
      </div>

      <div *ngIf="bookings.length === 0" style="text-align: center; padding: 40px;">
        <mat-icon style="font-size: 64px; width: 64px; height: 64px; color: #ccc; margin-bottom: 20px;">inbox</mat-icon>
        <p style="color: #666; font-size: 1.2rem;">No bookings yet</p>
      </div>

      <div *ngIf="bookings.length > 0">
        <div class="bookings-list">
          <mat-card class="booking-card" *ngFor="let booking of bookings" [ngClass]="getStatusClass(booking.completed)">
            <mat-card-header>
              <mat-card-title>{{ booking.fullName }}</mat-card-title>
              <mat-card-subtitle>
                <mat-chip [color]="booking.completed ? 'accent' : 'primary'" selected>
                  {{ getStatusText(booking.completed) }}
                </mat-chip>
              </mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0;">
                <div>
                  <strong>Phone:</strong><br>
                  {{ booking.phoneNumber }}
                </div>
                <div>
                  <strong>Service:</strong><br>
                  {{ booking.serviceType }}
                </div>
                <div>
                  <strong>Collection Point:</strong><br>
                  <mat-icon style="font-size: 16px; width: 16px; height: 16px; vertical-align: middle; color: var(--teal);">location_on</mat-icon>
                  {{ booking.collectionPoint }}
                </div>
                <div>
                  <strong>Date & Time:</strong><br>
                  {{ booking.date }} at {{ booking.time }}
                </div>
              </div>
              <div *ngIf="booking.entranceCode" style="margin-top: 15px; padding: 15px; background: rgba(177, 156, 217, 0.1); border-radius: 4px; border-left: 4px solid var(--primary-purple);">
                <strong><mat-icon style="font-size: 16px; width: 16px; height: 16px; vertical-align: middle;">vpn_key</mat-icon> Entrance Code:</strong> {{ booking.entranceCode }}
              </div>
              <div *ngIf="booking.additionalNotes" style="margin-top: 15px; padding: 15px; background: #f5f5f5; border-radius: 4px;">
                <strong>Notes:</strong> {{ booking.additionalNotes }}
              </div>
            </mat-card-content>
            <mat-card-actions *ngIf="!booking.completed">
              <button mat-raised-button color="primary" (click)="markAsCompleted(booking)">
                <mat-icon>check_circle</mat-icon>
                Mark as Completed
              </button>
            </mat-card-actions>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
</div>

